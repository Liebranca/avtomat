#!/usr/bin/perl

# tests Peso Language Pattern Syntax

# ---   *   ---   *   ---
# deps

  use v5.36.0;
  use strict;
  use warnings;

  use English qw(-no_match_vars);

  use lib $ENV{'ARPATH'}.'/avtomat/sys/';

  use Style;
  use Fmat;

  use Tree::Token;

# ---   *   ---   *   ---

my $f   = Tree::Token->get_frame();
my $top = $f->nit(

  value  => '<TOP>',
  parent => undef,

  action => undef,

);

# ---   *   ---   *   ---

my $value=$f->nit(

  value  => 'value',
  parent => $top,

  action => undef,

);

# ---   *   ---   *   ---

$f->nit(

  value  => qr{\d},
  parent => $value,

  action => \&Tree::Token::push_to_anchor,

);

$f->nit(

  value  => qr{,},
  parent => $value,

  action => \&Tree::Token::rew,

);

my $x=$top->match('0,1,2');

map {fatdump $ARG} @$x;

# ---   *   ---   *   ---
1; # ret
