#!/usr/bin/perl
#
# basic IPC
#
# ---   *   ---   *   ---

# deps

  use v5.36.0;
  use strict;
  use warnings;

  use English qw(-no_match_vars);

  use lib $ENV{'ARPATH'}.'/avtomat/sys/';
  use Via;

# ---   *   ---   *   ---

my $frame=Via->new_frame();
my $via=$frame->nit('uu');
my $pid=$via->sail();

# vessel
if($pid) {

  my $count=1;
  while(my $harb=$via->arrival()) {

    $harb->print(
      "Here's your data".
      $Via::UNLOAD

    );

    last;

  };

  while (wait!=-1) {};

# harbor
} else {

  my @crates=$via->shipments();
  map {say $ARG} @crates;

};

# ---   *   ---   *   ---
1; # ret
