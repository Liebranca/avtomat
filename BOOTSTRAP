#!/usr/bin/perl
# ---   *   ---   *   ---
# A BUILD TOOL MUST BUILD ITSELF
#
# LIBRE SOFTWARE
# Licensed under GNU GPL3
# be a bro and inherit
#
# CONTRIBUTORS
# lib,

# ---   *   ---   *   ---
# deps

package main;
  use v5.42.0;
  use strict;
  use warnings;


# ---   *   ---   *   ---
# procs MAM so that it can proc other files ;>

my $round = shift @ARGV;
my $FH    = undef;

chdir $ENV{'ARPATH'}.'/avtomat/';
open  $FH,'<','MAM.pm' or die "$!";

my $whole='';
while(my $line=readline $FH) {

  my $avtolib="{ARPATH}/lib";
  my $swaplib="{ARPATH}/.trash/avtomat";

  if($round) {
    my $tmp=$avtolib;
    $avtolib=$swaplib;
    $swaplib=$tmp;

  };

  $line   =~ s[$avtolib][$swaplib];
  $whole .=  $line;

};

print "$whole\n";
close $FH or die "$!";


# ---   *   ---   *   ---
1; # ret
