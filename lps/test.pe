%;


# ---   *   ---   *   ---
# info

entry peso::start;
clan  peso;


# ---   *   ---   *   ---
# ROM

rom data;
  byte pad $00;
  cstr exp '* (2 3)';


## ---   *   ---   *   ---
# setup

exe start;

  # cleanup
  xor dword cr,cr;
  xor       br,br;
  xor       dr,dr;

  # set segment
  self data;


# ---   *   ---   *   ---
# walk src

blk loop;


  # get next char
  ld  ar,byte [cr+data::exp];
  inc cr;

  # stop on null!
  test byte ar,ar;
  jz   end;


  # count '('
  ld  er,br;
  inc er;

  cmp byte ar,$28;
  lz  br,er;

  jz  loop;


  # ^count ')'
  ld  er,dr;
  inc er;

  cmp byte ar,$29
  lz  dr,er;


  # go next
  jmp loop;


# ---   *   ---   *   ---
# endof

blk end;

  xor ar,ar;
  ld  er,$01;

  cmp br,dr;
  lz  ar,er;

  exit 0;

# ---   *   ---   *   ---
